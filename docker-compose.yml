version: '2'

services:

  node:
    container_name: strawb-node
    image: devonchurch/strawberry-ice-cream
    build: .
    volumes:
      - .:/usr/app
    # environment:
    #   - NODE_ENV=development
    ports:
      - '3000:3000'
    networks:
      - strawb-network
    depends_on:
      - 'mongodb'

  #No authentication is provided here - just a demo! Read the Dockerfile
  #for more information about adding authentication.
  mongodb:
    container_name: strawb-mongo
    image: mongo
    volumes:
    #   - ./db:/data/db
      - strawb-data:/data/db
    # command:
    #   - echo 'running after volumes (2)'
    ports:
      - '27017:27017'
    networks:
      - strawb-network
    # command: bash -c echo 'custom mongo command'
    # command:
    #   - bash -c echo 'custom mongo command'

  # database:
  #   container_name: strawb-data


networks:
  strawb-network:
    driver: bridge

volumes:
    strawb-data:
        driver: 'local'

# version: '2'
#
# services:
#
#   node:
#     container_name: strawb-node
#     image: devonchurch/strawberry-ice-cream
#     build: .
#     volumes:
#       - .:/usr/app
#     # environment:
#     #   - NODE_ENV=development
#     ports:
#       - "3000:3000"
#     networks:
#       - my-app-network
#     # depends_on:
#     #   - "mongodb"
#     # command: npm run express:start
#
#   #No authentication is provided here - just a demo! Read the Dockerfile
#   #for more information about adding authentication.
#   mongodb:
#     container_name: strawb-mongo
#     image: mongo
#     # build: .
#     # volumes:
#     #   - /data/db
#     ports:
#       - "27017:27017"
#     networks:
#       - my-app-network
#     # command: bash -c mongod --dbpath=/data/db --port 27017 && mongo
#     command: echo 'mongo starting up'
#
# networks:
#
#   my-app-network:
#     driver: bridge
