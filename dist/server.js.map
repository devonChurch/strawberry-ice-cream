{"version":3,"sources":["webpack:///webpack/bootstrap cadc9a9ce45c76839210","webpack:///./server.js","webpack:///./express/initialise.js","webpack:///external \"express\"","webpack:///./mongo/transformer.js","webpack:///./mongo/mongoose.js","webpack:///external \"mongoose\"","webpack:///./mongo/seed.js","webpack:///./universal/html-boilerplate.js","webpack:///./socketio/send.js","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///./mongo/initialise.js"],"names":["require","console","log","express","app","checkTransformerRelevance","checkTransformerExistence","addTransformer","findAllTransformers","filterNameAndId","filterIsAutobot","findAllegianceAgainstId","seedDatabase","generateHtml","cwdStart","process","cwd","use","static","requestApp","request","response","then","html","send","requestIsAutobot","query","isAutobot","setHeader","JSON","stringify","sendModificationStatus","status","requestModifiy","pushLatestEntryToUsers","name","autobot","catch","error","get","path","module","exports","mongoose","seedData","transformerSchema","Schema","String","Boolean","timestamps","Transformer","model","Promise","resolve","reject","data","transformer","save","findOne","find","findLastTransformerEntry","sort","_id","extractIsAutobot","isArray","Array","map","extractNameAndId","seedWithTransformers","forEach","database","connection","global","connect","on","once","state","doctype","http","Server","socket","port","listen","filteredData","emit"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cadc9a9ce45c76839210","require('./express/initialise');\nconsole.log('express has initialised');\n\nrequire('./socketio/send');\nconsole.log('socketio has initialised');\n\nrequire('./mongo/initialise');\nconsole.log('mongo has initialised');\n\n\n\n// WEBPACK FOOTER //\n// ./server.js","const express = require('express');\nconst app = express();\nconst {checkTransformerRelevance, checkTransformerExistence, addTransformer, findAllTransformers, filterNameAndId, filterIsAutobot, findAllegianceAgainstId, seedDatabase} = require('../mongo/transformer');\nconst generateHtml = require('../universal/html-boilerplate');\n\nconsole.log('seedDatabase (initilise)', seedDatabase);\n\n// Must be called from the NPM script to lock the cwd as the root app directory.\nconst cwdStart = `${process.cwd()}/dist/public`;\napp.use('/', express.static(cwdStart));\n\nfunction requestApp(request, response) {\n\n\tfindAllTransformers()\n\t\t.then(filterNameAndId)\n\t\t.then(generateHtml)\n\t\t.then((html) => response.send(html));\n\n}\n\nfunction requestIsAutobot(request, response) {\n\n\tconst {query} = request;\n\tfindAllegianceAgainstId(query)\n\t\t.then(filterIsAutobot)\n\t\t.then(({isAutobot}) => {\n\n\t\t\tconsole.log('got back isAutobot', isAutobot);\n\t\t\tresponse.setHeader('Content-Type', 'application/json');\n\t\t\tresponse.send(JSON.stringify({isAutobot}));\n\n\t\t});\n\n}\n\nfunction sendModificationStatus(response, status) {\n\n\tresponse.send(status);\n\tconsole.log(status);\n\n}\n\nfunction requestModifiy(request, response) {\n\n\tconst {pushLatestEntryToUsers} = require('../socketio/send');\n\tconst {query} = request;\n\n\tcheckTransformerRelevance(query)\n\t\t.then(checkTransformerExistence)\n\t\t.then(addTransformer)\n\t\t.then(pushLatestEntryToUsers)\n\t\t.then(() => sendModificationStatus(response, `added transformer ${query.name} (${query.autobot ? 'autobot' : 'decepticon'}) to the database`))\n\t\t.catch((error) => sendModificationStatus(response, error));\n\n\t// http://localhost:3000/bin/modify/?name=Optimus Prime&isAutobot=true\n\t// http://localhost:3000/bin/modify/?name=Megatron&isAutobot=false\n\t// http://localhost:3000/bin/modify/?name=Bumblebee&isAutobot=true\n\t// http://localhost:3000/bin/modify/?name=Starscream&isAutobot=false\n\t// http://localhost:3000/bin/modify/?name=Ironhide&isAutobot=true\n\t// http://localhost:3000/bin/modify/?name=Soundwave&isAutobot=false\n\t// http://localhost:3000/bin/modify/?name=Ratchet&isAutobot=true\n\n}\n\napp.get('*', (request, response) => {\n\n\tconsole.log(`got \"(${request.path})\" request`);\n\n\tswitch (request.path) {\n\n\t\tcase '/':\n\t\t\treturn requestApp(request, response);\n\n\t\tcase '/bin/is-autobot/':\n\t\t\t// curl -i http://localhost:3000/bin/is-autobot/?_id=1234567890\n\t\t\treturn requestIsAutobot(request, response);\n\n\t\tcase '/bin/modify/':\n\t\t\t// curl -i http://localhost:3000/bin/modify/?name=starscream&isAutobot=false\n\t\t\treturn requestModifiy(request, response);\n\n\t\tdefault:\n\t\t\tresponse.status(404).send('Not found');\n\n\t}\n\n});\n\n// app.listen(3000);\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./express/initialise.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","const {mongoose} = require('./mongoose');\nconst seedData = require('./seed');\nconst transformerSchema = mongoose.Schema(\n\t{\n\t\tname: String,\n\t\tisAutobot: Boolean,\n\t},\n\t{\n\t\ttimestamps: true\n\t}\n);\nconst Transformer = mongoose.model('Transformer', transformerSchema);\n\nfunction checkTransformerRelevance({name, isAutobot}) {\n\n\tconsole.log(`checkTransformerRelevance, name = ${name} | isAutobot = ${isAutobot}`);\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tif (name && isAutobot) resolve({name, isAutobot});\n\t\telse reject('invalid data set please try again');\n\n\t});\n\n}\n\nfunction addTransformer(data) {\n\n\tconst transformer = new Transformer(data);\n\n\treturn transformer.save();\n\n}\n\nfunction checkTransformerExistence({name, isAutobot}) {\n\n\tconsole.log(`checkTransformerExistence, name = ${name} | isAutobot = ${isAutobot}`);\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tconsole.log('made new promise');\n\n\t\tTransformer\n\t\t\t.findOne({name})\n\t\t\t.then((data) => {\n\n\t\t\t\tconsole.log('got back existance data', data);\n\n\t\t\t\tif (data) reject('transformer alredady exists');\n\t\t\t\telse resolve({name, isAutobot});\n\n\t\t\t});\n\n\t});\n\n\n\n}\n\nfunction findAllTransformers() {\n\n\treturn Transformer.find();\n\n}\n\nfunction findLastTransformerEntry() {\n\n\treturn Transformer.findOne().sort('-updatedAt');\n\n}\n\nfunction findAllegianceAgainstId({_id}) {\n\n\treturn Transformer.findOne({_id});\n\n}\n\nfunction extractIsAutobot({isAutobot}) {\n\n\tconsole.log('extractIsAutobot', isAutobot);\n\n\treturn {isAutobot};\n\n}\n\nfunction filterIsAutobot(data) {\n\n\tconsole.log('filterIsAutobot', data);\n\n\t// {\"_id\":\"5853ba93b2fcae9d8e0d7ada\",\"name\":\"banana\",\"isAutobot\":true,\"__v\":0}\n\n\tconst isArray = Array.isArray(data);\n\n\tswitch (isArray) {\n\n\t\tcase true:\n\t\t\treturn data.map(extractIsAutobot);\n\n\t\tdefault:\n\t\t\treturn extractIsAutobot(data);\n\n\t}\n\n}\n\nfunction extractNameAndId({_id, name}) {\n\n\treturn {_id, name};\n\n}\n\nfunction filterNameAndId(data) {\n\n\t// {\"_id\":\"5853ba93b2fcae9d8e0d7ada\",\"name\":\"banana\",\"isAutobot\":true,\"__v\":0}\n\n\tconst isArray = Array.isArray(data);\n\n\tswitch (isArray) {\n\n\t\tcase true:\n\t\t\treturn data.map(extractNameAndId);\n\n\t\tdefault:\n\t\t\treturn extractNameAndId(data);\n\n\t}\n\n}\n\n\nfunction seedWithTransformers() {\n\n\tconsole.log('seeding database with preset transformers');\n\tconsole.log('seedData', seedData);\n\tseedData.forEach((data) => {\n\n\t\tcheckTransformerExistence(data)\n\t\t\t.then(addTransformer);\n\n\t});\n\n}\n\nmodule.exports = {\n\tcheckTransformerRelevance,\n\tcheckTransformerExistence,\n\taddTransformer,\n\tfindAllTransformers,\n\tfindLastTransformerEntry,\n\tfindAllegianceAgainstId,\n\tfilterIsAutobot,\n\tfilterNameAndId,\n\tseedWithTransformers\n};\n\n\n\n// WEBPACK FOOTER //\n// ./mongo/transformer.js","const mongoose = require('mongoose');\nconst database = mongoose.connection;\n\nmongoose.Promise = global.Promise; // Use native ES6 promises NOT the built in out of date pollyfll.\n\n// mongoose.connect('mongodb://127.0.0.1:27017/database');\n// mongoose.connect('mongodb://127.0.0.1:27017/db');\n// mongoose.connect('mongodb://127.0.0.1:27017');\n\n// \"mongodb\" = the name of the Docker image name.\nmongoose.connect('mongodb://mongodb:27017');\n\n// 172.18.0.1:42942\n// mongoose.connect('mongodb://172.18.0.1:27017/database');\n// mongoose.connect('mongodb://172.17.0.2:27017/database');\n// mongoose.connect('mongodb://db_1:27017/database');\n// mongoose.connect('mongodb://mongo:27017/database');\n// mongoose.connect('mongodb://mongo:27017'); // 'mongodb://db_1:27017/test' //  'mongodb://localhost/test'\n\ndatabase.on('error', () => console.log('database (mongoose) connection error'));\n\ndatabase.once('open', () => {\n\n\tconst {seedWithTransformers} = require('./transformer');\n\n\tconsole.log('database (mongoose) connected');\n\tseedWithTransformers();\n\n});\n\nmodule.exports = {\n\tmongoose,\n\tdatabase\n};\n\n\n\n// WEBPACK FOOTER //\n// ./mongo/mongoose.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 5\n// module chunks = 0","const seedData = [\n\t{\n\t\tname: 'Optimus Prime',\n\t\tisAutobot: true\n\t},\n\t{\n\t\tname: 'Megatron',\n\t\tisAutobot: false\n\t},\n\t{\n\t\tname: 'Bumblebee',\n\t\tisAutobot: true\n\t},\n\t{\n\t\tname: 'Starscream',\n\t\tisAutobot: false\n\t},\n\t{\n\t\tname: 'Ironhide',\n\t\tisAutobot: true\n\t},\n\t{\n\t\tname: 'Soundwave',\n\t\tisAutobot: false\n\t},\n\t{\n\t\tname: 'Ratchet',\n\t\tisAutobot: true\n\t}\n];\n\nmodule.exports = seedData;\n\n\n\n// WEBPACK FOOTER //\n// ./mongo/seed.js","module.exports = (state = []) => {\n\n\tconst doctype = '<!doctype html>';\n\tconst html = (\n\t\t`<html lang=\"en\">\n\n\t\t\t<head>\n\n\t\t\t\t<meta charset=\"utf-8\">\n\t\t\t\t<meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\">\n\t\t\t\t<title>Transformers</title>\n\t\t\t\t<meta name=\"description\" content=\"\">\n\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n\t\t\t\t<link rel=\"stylesheet\" href=\"/client.css\">\n\n\t\t\t\t<script>\n\t\t\t\t\twindow.__REDUX_STATE__ = {\n\t\t\t\t\t\ttransformers: ${JSON.stringify(state)}\n\t\t\t\t\t};\n\t\t\t\t</script>\n\n\t\t\t</head>\n\n\t\t\t<body>\n\n\t\t\t\t<div id=\"app\"></div>\n\t\t\t\t<script src=\"/client.js\"></script>\n\n\t\t\t</body>\n\n\t\t</html>`\n\t);\n\n\t// Forcing the doctype to butt right up as the first character on the first\n\t// line to avoid a syntax error on the client.\n\treturn (`${doctype}\\n${html}`);\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./universal/html-boilerplate.js","const express = require('../express/initialise');\nconst http = require('http').Server(express);\nconst socket = require('socket.io')(http);\nconst port = 3000;\nconst {findLastTransformerEntry, filterNameAndId} = require('../mongo/transformer');\n\nhttp.listen(port, () => console.log(`http server listening on port ${port}`));\n\nfunction pushLatestEntryToUsers() {\n\n\treturn findLastTransformerEntry()\n\t\t.then((data) => {\n\n\t\t\tconst filteredData = filterNameAndId(data);\n\t\t\tconsole.log('sending data to the client', filteredData);\n\t\t\tsocket.emit('newTransformerEntry', filteredData);\n\n\t\t});\n\n}\n\nmodule.exports = {\n\tpushLatestEntryToUsers\n};\n\n\n\n// WEBPACK FOOTER //\n// ./socketio/send.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 10\n// module chunks = 0","require('./mongoose');\n\n\n\n// WEBPACK FOOTER //\n// ./mongo/initialise.js"],"sourceRoot":""}